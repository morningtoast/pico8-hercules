pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
local px,py
local mshift=0
for i=0,15 do
	for j=0,15 do
		if fget(mget(i,j))==2 then
			px,py=i+0.5,j+0.5
			break
		end
	end
end

function project(x,y)
	return flr(8*x),flr(8*y)
end

function is_floor(x,y)
	return fget(mget(x,y))!=1
end

function is_valid(x,y,w)	
	return is_floor(x,y) and
		is_floor(x+w,y) and
		is_floor(x,y+w) and
		is_floor(x+w,y+w)
end

function _update()
	local dx,dy=0,0
	if(btn(0)) dx=-1
	if(btn(1)) dx=1
	if(btn(2)) dy=-1
	if(btn(3)) dy=1
	
	dx/=4
	dy/=4
	
	if is_valid(px+dx,py-mshift,0.8) then
		px+=dx
	end
	if is_valid(px,py+dy-mshift,0.8) then
		py+=dy
	end
	-- move map
	mshift+=1/8
	-- in wall?
	if not is_valid(px,py-mshift,0.8) then
		-- push player
		py+=1/8
	end
	
end

function _draw()
	cls()
	map(0,0,0,8*mshift,16,16)
	local x,y=project(px,py)
	palt(14,true)
	palt(0,false)
	spr(16,x,y)
	pal()
end

__gfx__
0000000056666667dddddddd0a0a0a0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000028888886dddddddda1111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070028888886dddddddd0111111a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700028888886dddddddda1111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700028888886dddddddd0111111a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070028888886dddddddda1111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000028888886dddddddd0111111a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000012222225dddddddda0a0a0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e00000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0040400e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0444440e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09c9c90e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0999990e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0900090e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000e000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
56666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
56666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
56666667dddddddd56666667566666675666666756666667dddddddddddddddddddddddddddddddd56666667dddddddd5666666756666667dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
28888886dddddddd28888886288888862888888628888886dddddddddddddddddddddddddddddddd28888886dddddddd2888888628888886dddddddddddddddd
12222225dddddddd12222225122222251222222512222225dddddddddddddddddddddddddddddddd12222225dddddddd1222222512222225dddddddddddddddd
56666667ddddddddddddddddddddddddddddd00000dddddddddddddddddddddddddddddddddddddd56666667dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd0040400ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd0444440ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd09c9c90ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd0999990ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd0900090ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddd000d000ddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddd
12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd12222225dddddddddddddddddddddddddddddddddddddddd
5666666756666667dddddddddddddddddddddddddddddddddddddddd56666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
1222222512222225dddddddddddddddddddddddddddddddddddddddd12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
56666667dddddddddddddddddddddddd0a0a0a0adddddddddddddddd56666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddda1111110dddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddd0111111adddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddda1111110dddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddd0111111adddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddda1111110dddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddd0111111adddddddddddddddd28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
12222225dddddddddddddddddddddddda0a0a0a0dddddddddddddddd12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
56666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
28888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
12222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
5666666756666667dddddddddddddddddddddddddddddddddddddddddddddddddddddddd566666675666666756666667dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
2888888628888886dddddddddddddddddddddddddddddddddddddddddddddddddddddddd288888862888888628888886dddddddddddddddddddddddddddddddd
1222222512222225dddddddddddddddddddddddddddddddddddddddddddddddddddddddd122222251222222512222225dddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__gff__
0001000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0102020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010101010202020201020101020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020202020202020201020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101020202020201020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020203020201020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101020202020202020101010202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
